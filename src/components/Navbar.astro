---
import { Astronav, MenuIcon, MenuItems, StickyHeader } from "astro-navbar";
import SwitchLanguague from "@components/shared/SwitchLanguague.astro";
import {
  getLangFromUrl,
  useTranslatedPath,
  useTranslations,
} from "@i18n/utils";
import Container from "@components/shared/Container.astro";
import Link from "@components/shared/Link.astro";
import logo from "@assets/images/logo.avif";
import { Image } from "astro:assets";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);
---

<StickyHeader
  class="shadow-md gap-6 z-20 transition-all w-full ease-in-out text-textPrimary sticky top-0 bg-sandy"
  scrollY={50}
  defaultClass=""
  activeClass="backdrop-blur-lg shadow-xl"
>
  <Container>
    <Astronav closeOnClick>
      <div
        class="flex justify-between items-center flex-col lg:flex-row relative w-full"
      >
        <div
          class="flex w-full lg:w-auto items-center justify-center lg:justify-between"
        >
          <a
            href={translatePath("/")}
            class="text-xl md:text-2xl text-textColor flex items-center transition-all rounded-full px-2 -ml-2"
          >
            <Image
              alt="logo"
              src={logo}
              class="w-12 h-auto mr-2"
              quality={"low"}
              loading={"eager"}
              format="avif"
            />
            <span class="block md:hidden">
              <span class="text-textColor">Hostel FLAKOS</span>
            </span>
            <span class="hidden md:block">
              <span>Chill - Surf - Repeat</span>
            </span>
          </a>
          <div class="block lg:hidden ml-4 pt-4">
            <MenuIcon class="w-8 h-8 text-textPrimary" />
          </div>
        </div>
        <MenuItems class="hidden lg:flex lg:items-center lg:w-auto">
          <ul
            class="flex flex-col lg:flex-row lg:gap-2 gap-10 items-center mt-4 md:mt-0"
          >
            <Link name={t("nav.index")} href={translatePath("/")} />
            <Link name={t("nav.rooms")} href={translatePath("/rooms/")} />
            <Link name={t("nav.about")} href={translatePath("/about/")} />
            <Link name={t("nav.gallery")} href={translatePath("/gallery/")} />
            <Link
              name={t("nav.experiences")}
              href={translatePath("/experiences/")}
            />

            <SwitchLanguague />
          </ul>
        </MenuItems>
      </div>
    </Astronav>
  </Container>
</StickyHeader>

<style is:global>
  .astronav-dropdown:hover .dropdown-toggle {
    display: block;
  }
</style>
